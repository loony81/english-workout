!function(e){function t(t){for(var n,i,c=t[0],l=t[1],s=t[2],m=0,f=[];m<c.length;m++)i=c[m],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);f.length;)f.shift()();return o.push.apply(o,s||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,c=1;c<r.length;c++){var l=r[c];0!==a[l]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={0:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;o.push([59,1]),r()}({59:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(27),i=r.n(o),c=r(3),l=Object(n.createContext)(null);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=function(){var e=Object(n.useContext)(l),t=e.isOnline,r=e.audio,o=e.isAuthenticated,i=e.setIsAuthenticated,u=e.isAdmin,m=e.setIsAdmin,f=s(Object(n.useState)(!1),2),p=f[0],d=f[1],g=function(e){d(!1),r.pause(),"LOGOUT"===e&&v()},v=function(){localStorage.removeItem("x-auth-token"),i(!1),u&&m(!1)},b=[{path:"/",page:"HOME"},{path:"/grammar",page:"GRAMMAR"},{path:"/proverbs",page:"PROVERBS"},{path:"/translation",page:"TRANSLATE"}];return o?(b.push({path:"/signin",page:"LOGOUT"}),u||b.push({path:"/me",page:"MY PROGRESS"})):b=b.concat([{path:"/signin",page:"LOGIN"},{path:"/signup",page:"REGISTER"}]),b.push({path:"/about",page:"ABOUT"}),a.a.createElement(a.a.Fragment,null,a.a.createElement("nav",{className:"Navbar"},a.a.createElement("div",{className:"Navbar-container"},a.a.createElement(c.b,{to:"/",className:"Navbar-logo",onClick:g},a.a.createElement("img",{src:"assets/images/dumbbell.svg"})," ENGLISH WORKOUT"),a.a.createElement("img",{style:{visibility:t?"hidden":"visible"},src:"assets/images/offline.svg"}),a.a.createElement("ul",{className:p?"Navbar-menu active":"Navbar-menu"},b.map((function(e,t){return a.a.createElement("li",{key:t,className:"Navbar-item"},a.a.createElement(c.c,{to:e.path,exact:!0,className:"Navbar-link",activeClassName:"Navbar-link-active",onClick:function(){return g(e.page)}},e.page))}))),a.a.createElement("div",{className:"Navbar-hamburger",onClick:function(){return d(!p)}},a.a.createElement("i",{className:p?"fas fa-times":"fas fa-bars"})))))},f=r(1),p=function(e){var t=e.children,r=e.currentPage,o=Object(n.useContext)(l).isOnline;return console.log("PageLayout is rendered"),a.a.createElement("div",{className:"PageLayout"},a.a.createElement("h5",null,a.a.createElement("span",{className:"offline",style:{visibility:o?"hidden":"visible"}},"You are currently offline"),"home"!=r&&a.a.createElement("span",{className:"current"},r)),t)},d=function(e){var t=e.children,r=e.to,n=e.onClickMe,o=e.disabled,i=e.title,l=e.form;return r?a.a.createElement(c.b,{title:i,to:r,className:"Button"},a.a.createElement("button",{form:l,disabled:o,onClick:n},t)):a.a.createElement("a",{title:i,className:"Button"},a.a.createElement("button",{form:l,onClick:n,disabled:o},t))},g=function(){return a.a.createElement(p,{currentPage:"home"},a.a.createElement("h1",null,"Exercise your English by listening to and typing out English proverbs, sayings and quotes!"),a.a.createElement(d,{to:"/grammar"},"Get Started! ",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-play-circle"})))},v=function(){return a.a.createElement(p,{currentPage:"about"},a.a.createElement("div",{style:{fontSize:"1.1rem",background:"#fff",borderRadius:"4px",padding:"5px",boxShadow:"0 0 10px rgba(0,0,0,0.5)"}},a.a.createElement("p",null,"   How not to forget English? If you've been learning English for quite some time and have gained some significant knowledge (at least by your own reckoning), you understand that if you are not a native speaker, you'll start to 'lose' your English very quickly without practice. It is a natural phenomenon. Apparently remembering a language, even your mother tongue, isn't quite like riding a bicycle. Without practice, your English will start to 'fade away'. So, how to maintain your English level?"),a.a.createElement("p",null,"I have found a solution. I have built a web app that will help you keep your English at a high level all the time! The app consists of three sections: 'Grammar', 'Proverbs' and 'Translation'. The 'Grammar' section allows you to practice English grammar. This is a collection of completely arbitrary sentences and phrases recorded in English which explain English grammar rules. The app randomly generates a phrase when you press the button. Your job is to listen to the recording carefully, understand it, and type it exactly like it sounds. The 'Proverbs' section contains a huge collection of recorded English proverbs, idioms, quotes, movie quotes, popular sayings, etc. It works exactly the same way: you generate recordings and type them precisely. You can recite them out loud if you want, to better memorize them. For most proverbs there is also an interpretation in parentheses that you also need to type. And with 'Translation' you can practice translating common English phrases and idioms for everyday use from Russian into English. This app will not only improve your pronunciation and listening skills, but also touch typing skills. Being able to quickly type in English is a must have skill nowadays. You can also use the application in offline mode by fetching items in advance (they will be stored in your browser during the session) and practicing when there's no Internet access."),a.a.createElement("p",null,"I chose proverbs for a reason. It is very efficient to learn English by memorizing proverbs and common phrases because they have a tendency to get imprinted into your brain much better than memorizing separate words. You can practice throughout the day whenever you have free time and access to the Internet. Just make a habit of it! And I guarantee you that you'll never forget English! This app contains over 4000 recordings made in American English (mostly). And I keep adding new ones all the time."),a.a.createElement("p",null,"Don't let your English rust, keep it shiny!")))},b=Object(n.forwardRef)((function(e,t){console.log("Textarea is rendered");var r={};return"proverbs"===e.topic?r.visibility="visible":r.visibility=e.description?"hidden":"visible",a.a.createElement("textarea",{disabled:-1===e.currentItem,onChange:e.compareText,onBlur:function(t){"proverbs"===e.topic&&t.target.focus()},ref:t,style:r,placeholder:"Type it here",maxLength:"300"})})),h=Object(n.forwardRef)((function(e,t){var r={};e.description?(r.visibility="visible",r.display="block"):(r.visibility="hidden",r.display="none");var n=e.currentItem;return a.a.createElement(a.a.Fragment,null,("grammar"==e.topic||"translation"==e.topic)&&a.a.createElement("p",{key:n,ref:t,style:r},-1==n?"":e.items[n].description))}));function y(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=function(e){var t=e.topic,r=e.item,o=e.pr,i=void 0!==o&&o,c=E(Object(n.useState)(!1),2),s=c[0],u=c[1],m=Object(f.g)(),p=Object(n.useContext)(l),d=p.isOnline,g=p.togglePriority,v=r.itemStatistics,b=v._id,h=v.timesEncountered,w=v.lastEncounteredOn,O=v.prioritized;console.log("Statistics is rendered");var x=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,g(t,b,O?"remove":"add");case 3:r=e.sent,u(!1),r&&r.error&&"Invalid token"===r.error&&m.push({pathname:"/signin",state:{from:location.pathname}});case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){y(o,n,a,i,c,"next",e)}function c(e){y(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return a.a.createElement("div",{className:"statistics"},a.a.createElement("p",null,0==h?"Previously encountered: 0 times":1==h?"Previously encountered: 1 time on ".concat(w):"Previously encountered: ".concat(h," times, last on ").concat(w)),a.a.createElement("div",null,a.a.createElement("p",null,i?"Remove from PR list":O?"This item is on your PR list. Do you want to remove it?":"Add to PR list"),a.a.createElement("button",{disabled:!(!s&&d),onClick:function(){return x()}},O?"-":"+")))},x=function(e){var t=e.topic,r=e.currentItem,o=(e.loading,e.description),i=e.sentenceVisibility,c=e.getNext,s=e.playSound,u=e.toggleVisibility,m=e.getPrevious,f=e.showHint,p=e.toggleTextarea,g=e.pr,v=Object(n.useContext)(l),b=v.isOnline,h=v.isAuthenticated,y=v.audio,E=g?"/api/prlist/":"/api/items/",w=g?"Download from Priority List":"Download a new item",O="translation"===t?"Russian":"Info",x=o?"Switch to textarea":"translation"===t?"View Russian version":"Show description for this item",j=i?"Hide this item completely":"Completely reveal this item",k=g?"Return to main "+t+" page":"Go to my priority list for "+t;return console.log("Bottom Navigation is rendered"),a.a.createElement(a.a.Fragment,null,a.a.createElement(d,{title:w,onClickMe:function(){return c(E,t)},disabled:!b},"Next ",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-cloud-download-alt"})),"translation"!==t&&a.a.createElement(d,{onClickMe:function(){return s()},disabled:r<0},"Play ",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-volume-up"})),"proverbs"!==t&&a.a.createElement(d,{title:x,onClickMe:function(){return p()},disabled:r<0},o?"Type":O," ",a.a.createElement("br",null),o?a.a.createElement("i",{className:"fas fa-keyboard"}):a.a.createElement("i",{className:"fas fa-info-circle"})),a.a.createElement(d,{title:j,onClickMe:function(){return u()},disabled:r<0},i?"Hide":"Show"," ",a.a.createElement("br",null),i?a.a.createElement("i",{className:"fas fa-eye-slash"}):a.a.createElement("i",{className:"fas fa-eye"})),a.a.createElement(d,{title:"Go back to previously downloaded item",onClickMe:function(){return m()},disabled:r<=0},"Previous ",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-chevron-circle-right"})),"translation"===t&&a.a.createElement(d,{title:"Reveal one character",onClickMe:function(){return f()},disabled:r<0},"Hint ",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-user-secret"})),h&&a.a.createElement(d,{title:k,to:g?"/"+t:"/"+t+"pr",onClickMe:function(){return y.pause()}},g?"Go Back":"Priority List"," ",a.a.createElement("br",null),g?a.a.createElement("i",{className:"fas fa-sign-out-alt"}):a.a.createElement("i",{className:"fas fa-light fa-list-ul"})))},j=Object(n.memo)(x,(function(e,t){return t.topic===e.topic&&t.currentItem===e.currentItem&&t.sentenceVisibility===e.sentenceVisibility&&t.loading===e.loading&&t.description===e.description&&t.pr===e.pr})),k=r(12),S=r.n(k),P=r(4),A=r.n(P);function I(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function R(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){C(o,n,a,i,c,"next",e)}function c(e){C(o,n,a,i,c,"throw",e)}i(void 0)}))}}var T=new URL(window.location.origin);function D(){return M.apply(this,arguments)}function M(){return(M=R(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.searchParams.set("rand",Date.now()),e.prev=1,e.next=4,A.a.head(T.toString());case 4:return console.log("Connection to the Internet restored."),e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(1),console.log("Trying to reconnect..."),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function L(e){var t,r="",n=I(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.match(/[0-9.,':;()!?\s-\/]/)?r+=a:a.match(/[A-Z]/)?r+="X":r+="x"}}catch(e){n.e(e)}finally{n.f()}return r}function W(e,t){e.textContent="",t(setInterval((function(){e&&(e.textContent.length>=3?e.textContent=".":e.textContent+=".")}),500))}function q(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function F(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){q(o,n,a,i,c,"next",e)}function c(e){q(o,n,a,i,c,"throw",e)}i(void 0)}))}}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var U=function(e){var t=e.items,r=e.topic,o=e.pr,i=void 0!==o&&o,c=B(Object(n.useState)(t.length-1),2),s=c[0],u=c[1],m=B(Object(n.useState)(!1),2),p=m[0],d=m[1],g=B(Object(n.useState)(!0),2),v=g[0],y=g[1],E=B(Object(n.useState)(0),2),w=E[0],x=E[1],k=B(Object(n.useState)(!1),2),P=k[0],A=k[1],I=Object(n.useRef)(),N=Object(n.useRef)(),C=Object(n.useRef)(),R=Object(n.useContext)(l),T=R.isOnline,D=R.isAuthenticated,M=R.audio,L=R.generate,q=Object(f.g)();console.log("WorkingArea is rendered"),Object(n.useEffect)((function(){u(t.length-1),p&&d(!1)}),[t]),Object(n.useEffect)((function(){P?W(N.current,x):clearInterval(w)}),[P]),Object(n.useEffect)((function(){I.current.value="",v||y(!0)}),[s]),Object(n.useEffect)((function(){T&&P&&(A(!1),t.length>0?N.current.textContent=t[s].mask:N.current.textContent="")}),[T]);var G=function(){var e=F(regeneratorRuntime.mark((function e(r,n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=15;break}return M.pause(),A(!0),I.current.value="","proverbs"!==n&&(C.current.textContent=""),e.next=7,L(r,n);case 7:if(a=e.sent,A(!1),!a||!a.error){e.next=15;break}if("Invalid token"!==a.error){e.next=14;break}return e.abrupt("return",q.push({pathname:"/signin",state:{from:location.pathname}}));case 14:a.error.startsWith("There are no items on")?N.current.textContent=a.error:s>-1&&(N.current.textContent=t[s].mask,"proverbs"!==n&&(C.current.textContent=t[s].description));case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();function U(){return(U=F(regeneratorRuntime.mark((function e(){var n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=17;break}if("proverbs"!==r&&I.current.focus(),n=t[s].audio.name,!(a=t[s].audio.link)){e.next=17;break}return e.prev=5,e.next=8,S.a.getItem(n);case 8:return(o=e.sent)?M.src=URL.createObjectURL(o):(M.src=a,console.log("playing from Google Drive")),e.next=12,M.play();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),console.log(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}return s=t[s]?s:t.length-1,a.a.createElement("div",{className:"WorkingArea"},a.a.createElement("div",{className:"WorkingArea-show"},a.a.createElement("p",{ref:N,key:s,style:{borderBottom:"proverbs"!==r&&v&&"1px solid #d3d3d3"}},s>-1&&(p?t[s].sentence:t[s].mask)),a.a.createElement("div",null,a.a.createElement(b,{topic:r,currentItem:s,description:v,compareText:function(e){if(!P){var r=e.target.style.color,n=e.target.value,a=e.target.value.length,o=t[s];o.sentence.startsWith(n)?(p||(N.current.innerText=n+o.mask.slice(a)),"red"!==r&&"green"!==r||(e.target.style.color="black"),o.sentence.length===a&&(e.target.style.color="green",!p&&d(!0))):e.target.style.color="red"}},ref:I}),a.a.createElement(h,{topic:r,description:v,ref:C,currentItem:s,items:t})),D&&s>-1&&t[s].itemStatistics&&a.a.createElement(O,{topic:r,item:t[s],pr:i})),a.a.createElement("div",{className:"WorkingArea-navigation"},a.a.createElement(j,{topic:r,currentItem:s,description:v,loading:P,sentenceVisibility:p,getNext:G,playSound:function(){return U.apply(this,arguments)},toggleVisibility:function(){P||("proverbs"!==r&&I.current.focus(),d(!p))},getPrevious:function(){M.pause(),w&&clearInterval(w),P&&A(!1),u(s-1),p&&d(!1)},showHint:function(){if(!P){var e=t[s],r=I.current.value.length;r!==e.sentence.length&&(I.current.style.color="black",I.current.focus(),I.current.value=e.sentence.slice(0,r+1),p||(N.current.innerText=I.current.value+e.mask.slice(r+1)),I.current.value.length===e.sentence.length&&(!p&&d(!0),I.current.style.color="green"))}},toggleTextarea:function(){y(!v),setTimeout((function(){return I.current.focus()}),100)},pr:i})))},z=function(e){var t=e.items;return console.log("Grammar is rendered"),a.a.createElement(p,{currentPage:"grammar"},a.a.createElement(U,{items:t,topic:"grammar"}))},_=function(e){var t=e.items;return console.log("Proverbs is rendered"),a.a.createElement(p,{currentPage:"proverbs"},a.a.createElement(U,{items:t,topic:"proverbs"}))},Y=function(e){var t=e.items;return console.log("Translate is rendered"),a.a.createElement(p,{currentPage:"translation"},a.a.createElement(U,{items:t,topic:"translation"}))};function $(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Z=function(e){var t=e.page,r=e.authenticate,o=K(Object(n.useState)(""),2),i=o[0],c=o[1],s=K(Object(n.useState)({}),2),u=s[0],m=s[1],g=K(Object(n.useState)(!1),2),v=g[0],b=g[1],h=Object(n.useContext)(l).isOnline,y=Object(f.g)(),E="signup"===t;Object(n.useEffect)((function(){y.location.state&&c("Sorry to interrupt, but your session has expired. Please sign back in if you care about tracking your progress")}),[]),Object(n.useEffect)((function(){i&&c(""),(u.email||u.password)&&w()}),[t]);var w=function(){m({email:"",password:""})},O=function(e){m(V(V({},u),{},J({},e.target.name,e.target.value)))},x=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i&&c(""),b(!0),e.next=5,r(E?"/api/users":"api/auth",u);case 5:if(n=e.sent,b(!1),!n||!n.error){e.next=10;break}return"Network Error"!==n.error&&c(n.error),e.abrupt("return");case 10:y.location.state&&y.goBack(),y.push("/");case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){$(o,n,a,i,c,"next",e)}function c(e){$(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return console.log("Auth is rendered"),a.a.createElement(p,{currentPage:t},a.a.createElement("div",{className:"WorkingArea"},a.a.createElement("div",{className:"WorkingArea-show"},a.a.createElement("form",{id:"authForm",onSubmit:x},"signup"===t&&a.a.createElement("input",{type:"text",name:"name",value:u.name,onChange:O,placeholder:"Your name",required:!0}),a.a.createElement("input",{type:"email",name:"email",value:u.email,onChange:O,placeholder:"Your email",required:!0}),a.a.createElement("input",{type:"password",name:"password",value:u.password,onChange:O,placeholder:"Your password",required:!0})),a.a.createElement("p",{style:{color:"red"}},i)),a.a.createElement("div",{className:"WorkingArea-navigation"},a.a.createElement(d,{form:"authForm",disabled:!(!v&&h)},E?"Register":"Login",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-sign-in-alt"})))))};function Q(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re=function(e){var t,r=e.fetchStatistics,o=ee(Object(n.useState)(""),2),i=o[0],c=o[1],s=ee(Object(n.useState)(""),2),u=s[0],m=s[1],g=ee(Object(n.useState)(!1),2),v=g[0],b=g[1],h=ee(Object(n.useState)(0),2),y=h[0],E=h[1],w=Object(n.useContext)(l).isOnline,O=Object(f.g)(),x=Object(n.useRef)();w?u?t=u:i&&(t=i):t="Sorry, you can't view your statistics while being offline. Please, get back online",Object(n.useEffect)((function(){var e;w&&(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,r();case 3:if(t=e.sent,b(!1),!t||!t.error){e.next=11;break}return"Invalid token"===t.error&&O.push({pathname:"/signin",state:{from:location.pathname}}),m(t.error),e.abrupt("return");case 11:c(j(t));case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Q(o,n,a,i,c,"next",e)}function c(e){Q(o,n,a,i,c,"throw",e)}i(void 0)}))})()}),[w]),Object(n.useEffect)((function(){v?W(x.current,E):clearInterval(y)}),[v]);var j=function(e){var t=e.name,r=e.dateJoined,n=e.grammar,a=e.proverbs,o=e.translations;return'<strong style="font-size: 1.4rem;">'.concat(t,"</strong>\nJoined on: ").concat(new Date(r).toDateString(),'\n\t<span style="text-decoration: underline;">Grammar</span>: \n\t\tTotal items: <strong>').concat(n.total,"</strong>\n\t\tProcessed: <strong>").concat(n.processed,"</strong>\n\t\tOn Priority List: <strong>").concat(n.onPriorityList,'</strong>\n\t<span style="text-decoration: underline;">Proverbs</span>: \n\t\tTotal items: <strong>').concat(a.total,"</strong>\n\t\tProcessed: <strong>").concat(a.processed,"</strong>\n\t\tOn Priority List: <strong>").concat(a.onPriorityList,'</strong>\n\t<span style="text-decoration: underline;">Translations</span>: \n\t\tTotal items: <strong>').concat(o.total,"</strong>\n\t\tProcessed: <strong>").concat(o.processed,"</strong>\n\t\tOn Priority List: <strong>").concat(o.onPriorityList,"</strong>\n")};return console.log("Me is rendered"),a.a.createElement(p,{currentPage:"My Progress"},a.a.createElement("div",{className:"WorkingArea"},a.a.createElement("div",{className:"WorkingArea-show"},a.a.createElement("p",{ref:x,style:{fontSize:"1rem",borderRadius:"0.25rem"},dangerouslySetInnerHTML:{__html:t}})),a.a.createElement("div",{className:"WorkingArea-navigation"},a.a.createElement(d,{onClickMe:function(){return O.goBack()}},"Back",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-chevron-circle-left"})))))},ne=function(e){var t=e.items;return console.log("GrammarPriority is rendered"),a.a.createElement(p,{currentPage:"grammar priority"},a.a.createElement(U,{items:t,topic:"grammar",pr:!0}))},ae=function(e){var t=e.items;return console.log("ProverbsPriority is rendered"),a.a.createElement(p,{currentPage:"proverbs priority"},a.a.createElement(U,{items:t,topic:"proverbs",pr:!0}))},oe=function(e){var t=e.items;return console.log("TranslatePriority is rendered"),a.a.createElement(p,{currentPage:"translation priority"},a.a.createElement(U,{items:t,topic:"translation",pr:!0}))};function ie(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function ce(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){ie(o,n,a,i,c,"next",e)}function c(e){ie(o,n,a,i,c,"throw",e)}i(void 0)}))}}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ue=function(e){var t=e.topic,r=le(Object(n.useState)(""),2),o=r[0],i=r[1],s=le(Object(n.useState)(""),2),u=s[0],m=s[1],f=le(Object(n.useState)(!1),2),g=f[0],v=f[1],b=le(Object(n.useState)([]),2),h=b[0],y=b[1],E=Object(n.useContext)(l),w=E.isOnline,O=E.setIsOnline;Object(n.useEffect)((function(){o&&i(""),u&&m(""),h.length&&y([])}),[t]);var x=function(){var e=ce(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.post("/api/admin/"+t,{proverb:u},{headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("x-auth-token")}});case 3:r=e.sent,console.log(r.data),r.data.length?y(r.data):i("Your query returned no results"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response?i(e.t0.response.data.message):(i(e.t0.message),"Network Error"===e.t0.message&&O(!1));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=ce(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(u.length>2)){e.next=9;break}return o&&i(""),v(!0),m(""),e.next=7,x();case 7:e.sent,v(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log("Find is rendered"),a.a.createElement(p,{currentPage:t},a.a.createElement("div",{className:"WorkingArea"},a.a.createElement("form",{id:"searchForm",onSubmit:j},a.a.createElement("div",{className:"WorkingArea-show"},a.a.createElement("p",{style:{fontSize:"1rem"}},o||a.a.createElement("ul",{style:{paddingLeft:"5px"}},h.map((function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("li",{style:{clear:"both",overflow:"hidden"}},e.proverb,a.a.createElement("span",{style:{float:"right",marginRight:"5px"}},a.a.createElement(c.b,{to:{pathname:"/edit"+t,state:{item:e}}},"Edit"))),a.a.createElement("hr",null))})))),a.a.createElement("div",null,a.a.createElement("textarea",{style:{visibility:"visible"},value:u,onChange:function(e){m(e.target.value)},placeholder:"Enter the full text of the proverb or part of it",maxLength:"300"}))),a.a.createElement("div",{className:"WorkingArea-navigation"},a.a.createElement(d,{form:"searchForm",title:"Find existing items for "+t,disabled:!(!g&&w)},"Find",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-chevron-circle-left"})),a.a.createElement(d,{to:"/add"+t,title:"Add a new item to "+t,disabled:!(!g&&w)},"Add ",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-cloud-download-alt"}))))))};function me(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function fe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){me(o,n,a,i,c,"next",e)}function c(e){me(o,n,a,i,c,"throw",e)}i(void 0)}))}}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var he=function(e){var t=e.topic,r=ve(Object(n.useState)(""),2),o=r[0],i=r[1],c=ve(Object(n.useState)(!1),2),s=c[0],u=c[1],m=ve(Object(n.useState)(!1),2),g=m[0],v=m[1],b=Object(n.useContext)(l),h=b.isOnline,y=b.setIsOnline,E=Object(f.h)(),w=Object(f.g)(),O=ve(Object(n.useState)(E.state.item),2),x=O[0],j=O[1],k=function(e){!g&&v(!0),j(de(de({},x),{},ge({},e.target.name,e.target.value)))},S=function(e){!g&&v(!0);var t=e.target,r=t.id,n=t.name,a=t.value;x.sounds[r][n]=a,j(de({},x))},P=function(){var e=fe(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.sounds&&(x.sounds=x.sounds.map((function(e){return{name:e.name,link:e.link}}))),e.prev=1,e.next=4,A.a.put("/api/admin/"+t,de({},x),{headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("x-auth-token")}});case 4:e.sent,w.goBack(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.t0.response?i(e.t0.response.data.message):(i(e.t0.message),"Network Error"===e.t0.message&&y(!1));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=fe(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.delete("/api/admin/"+t+"/"+E.state.item._id,{headers:{"x-auth-token":localStorage.getItem("x-auth-token")}});case 3:e.sent,w.goBack(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0.response?i(e.t0.response.data.message):(i(e.t0.message),"Network Error"===e.t0.message&&y(!1));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=fe(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o&&i(""),u(!0),e.next=5,P();case 5:u(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log("Edit is rendered"),a.a.createElement(p,{currentPage:t},a.a.createElement("div",{className:"WorkingArea"},a.a.createElement("div",{className:"WorkingArea-show"},a.a.createElement("form",{id:"editForm",onSubmit:N},a.a.createElement("label",null,a.a.createElement("strong",null,"proverb:"),a.a.createElement("textarea",{style:{visibility:"visible"},name:"proverb",value:x.proverb,onChange:k,required:!0})),E.state.item.description&&a.a.createElement("label",null,a.a.createElement("strong",null,"description:"),a.a.createElement("textarea",{style:{visibility:"visible"},name:"description",value:x.description,onChange:k,required:!0,wrap:"soft"})),x.sounds&&a.a.createElement("span",{style:{textDecoration:"underline"}},a.a.createElement("hr",null),a.a.createElement("strong",null,"sounds:"),a.a.createElement("br",null)),x.sounds&&x.sounds.map((function(e,t){return a.a.createElement(a.a.Fragment,null,a.a.createElement("label",null,a.a.createElement("strong",null,"file name:"),a.a.createElement("input",{type:"text",name:"name",value:e.name,id:t,onChange:S,required:!0})),a.a.createElement("label",null,a.a.createElement("strong",null,"link:"),a.a.createElement("input",{type:"url",name:"link",value:e.link,id:t,onChange:S,required:!0})))}))),a.a.createElement("p",{style:{color:"red"}},o)),a.a.createElement("div",{className:"WorkingArea-navigation"},a.a.createElement(d,{form:"editForm",title:"Save changes",disabled:!(!s&&h&&g)},"Save",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-chevron-circle-left"})),a.a.createElement(d,{title:"Delete this item",onClickMe:function(){return I()},disabled:!(!s&&h)},"Delete",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-chevron-circle-left"})),a.a.createElement(d,{to:"/"+t,title:"Go Back",disabled:!!s},"Back ",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-cloud-download-alt"})))))};function ye(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function Ee(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){ye(o,n,a,i,c,"next",e)}function c(e){ye(o,n,a,i,c,"throw",e)}i(void 0)}))}}function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Se=function(e){var t=e.topic,r=je(Object(n.useState)(""),2),o=r[0],i=r[1],c=je(Object(n.useState)(!1),2),s=c[0],u=c[1],m=Object(n.useContext)(l),g=m.isOnline,v=m.setIsOnline,b=Object(f.g)(),h=je(Object(n.useState)({}),2),y=h[0],E=h[1],w=je(Object(n.useState)({}),2),O=w[0],x=w[1];Object(n.useEffect)((function(){"translation"!==t&&(y.sounds=[O])}),[O]);var j=function(e){E(Oe(Oe({},y),{},xe({},e.target.name,e.target.value)))},k=function(e){x(Oe(Oe({},O),{},xe({},e.target.name,e.target.value)))},S=function(){var e=Ee(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(y),e.prev=1,e.next=4,A.a.post("/api/admin/add_"+t,Oe({},y),{headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("x-auth-token")}});case 4:e.sent,b.goBack(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.t0.response?i(e.t0.response.data.message):(i(e.t0.message),"Network Error"===e.t0.message&&v(!1));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Ee(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o&&i(""),u(!0),e.next=5,S();case 5:u(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log("Add is rendered"),a.a.createElement(p,{currentPage:t},a.a.createElement("div",{className:"WorkingArea"},a.a.createElement("div",{className:"WorkingArea-show"},a.a.createElement("form",{id:"addForm",onSubmit:P},a.a.createElement("label",null,a.a.createElement("strong",null,"proverb:"),a.a.createElement("textarea",{style:{visibility:"visible"},name:"proverb",value:y.proverb,onChange:j,required:!0})),"proverbs"!==t&&a.a.createElement("label",null,a.a.createElement("strong",null,"description:"),a.a.createElement("textarea",{style:{visibility:"visible"},name:"description",value:y.description,onChange:j,required:!0})),"translation"!==t&&a.a.createElement("span",{style:{textDecoration:"underline"}},a.a.createElement("hr",null),a.a.createElement("strong",null,"sounds:"),a.a.createElement("br",null)),"translation"!==t&&a.a.createElement(a.a.Fragment,null,a.a.createElement("label",null,a.a.createElement("strong",null,"file name:"),a.a.createElement("input",{type:"text",name:"name",value:O.name,onChange:k,required:!0})),a.a.createElement("label",null,a.a.createElement("strong",null,"link:"),a.a.createElement("input",{type:"url",name:"link",value:O.link,onChange:k,required:!0})))),a.a.createElement("p",{style:{color:"red"}},o)),a.a.createElement("div",{className:"WorkingArea-navigation"},a.a.createElement(d,{form:"addForm",title:"Save item",disabled:!(!s&&g)},"Save",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-chevron-circle-left"})),a.a.createElement(d,{to:"/"+t,title:"Go Back",disabled:!!s},"Back ",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-cloud-download-alt"})))))},Pe=function(e){var t=e.props,r=Object(n.useContext)(l),o=r.isAuthenticated,i=r.isAdmin,c=t.grammarItems,s=t.proverbs,u=t.translateItems,m=t.authenticate,p=t.fetchStatistics,d=t.grammarItemsPR,b=t.proverbsPR,h=t.translateItemsPR;return i?a.a.createElement(f.d,null,a.a.createElement(f.b,{path:"/",exact:!0},a.a.createElement(g,null)),a.a.createElement(f.b,{path:"/grammar"},a.a.createElement(ue,{topic:"grammar"})),a.a.createElement(f.b,{path:"/proverbs"},a.a.createElement(ue,{topic:"proverbs"})),a.a.createElement(f.b,{path:"/translation"},a.a.createElement(ue,{topic:"translation"})),a.a.createElement(f.b,{path:"/editgrammar"},a.a.createElement(he,{topic:"grammar"})),a.a.createElement(f.b,{path:"/editproverbs"},a.a.createElement(he,{topic:"proverbs"})),a.a.createElement(f.b,{path:"/edittranslation"},a.a.createElement(he,{topic:"translation"})),a.a.createElement(f.b,{path:"/addgrammar"},a.a.createElement(Se,{topic:"grammar"})),a.a.createElement(f.b,{path:"/addproverbs"},a.a.createElement(Se,{topic:"proverbs"})),a.a.createElement(f.b,{path:"/addtranslation"},a.a.createElement(Se,{topic:"translation"})),a.a.createElement(f.b,{path:"/about"},a.a.createElement(v,null)),a.a.createElement(f.b,{path:"/signin"},a.a.createElement(Z,{page:"signin",authenticate:m})),a.a.createElement(f.a,{to:"/"})):a.a.createElement(f.d,null,a.a.createElement(f.b,{path:"/",exact:!0},a.a.createElement(g,null)),a.a.createElement(f.b,{path:"/grammar"},a.a.createElement(z,{items:c})),a.a.createElement(f.b,{path:"/proverbs"},a.a.createElement(_,{items:s})),a.a.createElement(f.b,{path:"/translation"},a.a.createElement(Y,{items:u})),a.a.createElement(f.b,{path:"/about"},a.a.createElement(v,null)),!o&&a.a.createElement(f.b,{path:"/signup",exact:!0},a.a.createElement(Z,{page:"signup",authenticate:m})),!o&&a.a.createElement(f.b,{path:"/signin",exact:!0},a.a.createElement(Z,{page:"signin",authenticate:m})),o&&a.a.createElement(f.b,{path:"/me",exact:!0},a.a.createElement(re,{fetchStatistics:p})),o&&a.a.createElement(f.b,{path:"/grammarpr",exact:!0},a.a.createElement(ne,{items:d})),o&&a.a.createElement(f.b,{path:"/proverbspr",exact:!0},a.a.createElement(ae,{items:b})),o&&a.a.createElement(f.b,{path:"/translationpr",exact:!0},a.a.createElement(oe,{items:h})),a.a.createElement(f.a,{to:"/"}))},Ae=function(){var e=Object(n.useContext)(l).isOnline;return a.a.createElement("footer",{className:"Footer"},a.a.createElement("p",null,"Created with ♥ by Roman Nazarenko ",a.a.createElement("a",{href:"https://github.com/loony81",onClick:function(t){return!e&&t.preventDefault()}},a.a.createElement("i",{className:"fab fa-github-alt"}))))},Ie=r(8),Ne=r.n(Ie),Ce=r(29);function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){De(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function De(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Me(e){return function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Fe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function We(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Le(o,n,a,i,c,"next",e)}function c(e){Le(o,n,a,i,c,"throw",e)}i(void 0)}))}}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||Fe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){if(e){if("string"==typeof e)return Be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Be(e,t):void 0}}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ge=function(){var e,t=qe(Object(n.useState)([]),2),r=t[0],o=t[1],i=qe(Object(n.useState)([]),2),s=i[0],u=i[1],f=qe(Object(n.useState)([]),2),p=f[0],d=f[1],g=qe(Object(n.useState)([]),2),v=g[0],b=g[1],h=qe(Object(n.useState)([]),2),y=h[0],E=h[1],w=qe(Object(n.useState)([]),2),O=w[0],x=w[1],j=qe(Object(n.useState)(!0),2),k=j[0],P=j[1],I=qe(Object(n.useState)(!1),2),N=I[0],C=I[1],R=qe(Object(n.useState)(!1),2),T=R[0],M=R[1],W=qe(Object(n.useState)(new Audio),2),q=W[0];W[1];q.volume=1;var F=Object(n.memo)(m);console.log("App is rendered"),Object(n.useEffect)((function(){window.addEventListener("offline",function(){var e=We(Ne.a.mark((function e(t){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:!e.sent&&k&&P(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1),window.addEventListener("online",function(){var e=We(Ne.a.mark((function e(t){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:e.sent&&P(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1);var e=localStorage.getItem("x-auth-token");e&&(Object(Ce.isJwtExpired)(e)||(C(!0),_(e)&&M(!0))),console.log("App is mounted")}),[]),Object(n.useEffect)((function(){k||(e=setInterval(We(Ne.a.mark((function t(){var r;return Ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:r=t.sent,console.log(r),r&&(P(!0),clearInterval(e));case 5:case"end":return t.stop()}}),t)}))),5e3))}),[k]);var B=function(e){return A.a.post("/api/items/audio",{url:e},{responseType:"blob"}).then((function(e){return e.data})).catch((function(e){throw new Error("Can't download audio file")}))},G=function(e,t,n){if("grammar"==e){var a=[].concat(Me(n?v:r),[t]);n?b(a):o(a)}if("proverbs"==e){var i=[].concat(Me(n?y:s),[t]);n?E(i):u(i)}if("translation"==e){var c=[].concat(Me(n?O:p),[t]);n?x(c):d(c)}},U=function(e,t,r,n){n(r.map((function(r){if(r.id===e){var n=Te({},r);return n.itemStatistics.prioritized=t,n}return r})))},z=function(e,t,r){var n=t.filter((function(t){return t.id!==e}));n.length<t.length&&r(n)},_=function(e){var t=e.indexOf(".")+1,r=e.lastIndexOf(".");return JSON.parse(atob(e.slice(t,r))).isAdmin},Y=function(e,t){var r="";return e.response?"Invalid token"===(r=e.response.data.message)&&(localStorage.removeItem("x-auth-token"),C(!1)):"Network Error"===(r=e.message)&&P(!1),console.log("Something wrong inside ".concat(t,"(): ").concat(r)),{error:r}};function $(){return($=We(Ne.a.mark((function e(t,r){var n,a,o,i,c,l,s,u,m,f,p;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/prlist/"===t,a=N?{"x-auth-token":localStorage.getItem("x-auth-token")}:null,e.prev=2,e.next=5,A.a.get(t+r,{headers:a});case 5:if(!(c=e.sent).data.audio){e.next=20;break}if(l=c.data.audio,s=l.name,u=l.link,!s||!u){e.next=20;break}return s=r+"/"+s,c.data.audio.name=s,e.next=13,S.a.getItem(s);case 13:if(m=e.sent,!u||m){e.next=20;break}return e.next=17,B(u);case 17:return f=e.sent,e.next=20,S.a.setItem(s,f);case 20:c.data.mask=L(c.data.sentence),(p=null===(o=c.data)||void 0===o||null===(i=o.itemStatistics)||void 0===i?void 0:i.lastEncounteredOn)&&(c.data.itemStatistics.lastEncounteredOn=new Date(p).toDateString().split(" ").slice(1).join(" ")),G(r,c.data,n),e.next=29;break;case 26:return e.prev=26,e.t0=e.catch(2),e.abrupt("return",Y(e.t0,"generate"));case 29:case"end":return e.stop()}}),e,null,[[2,26]])})))).apply(this,arguments)}function H(){return(H=We(Ne.a.mark((function e(t,r){var n,a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.post(t,Te({},r),{"Content-Type":"application/json"});case 3:if(n=e.sent,a=n.headers["x-auth-token"]){e.next=7;break}throw new Error("Something went wrong, try again later");case 7:localStorage.setItem("x-auth-token",a),C(!0),_(a)&&M(!0),e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",Y(e.t0,"authenticate"));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function V(){return(V=We(Ne.a.mark((function e(t,n,a){var i,c,l;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="/api/prlist/".concat(t,"/").concat(n,"/").concat(a),c=N?{"x-auth-token":localStorage.getItem("x-auth-token")}:null,e.prev=2,e.next=5,A.a.put(i,null,{headers:c});case 5:l=e.sent,"grammar"===t&&(U(n,l.data.prioritized,r,o),"remove"==a&&z(n,v,b)),"proverbs"==t&&(U(n,l.data.prioritized,s,u),"remove"==a&&z(n,y,E)),"translation"==t&&(U(n,l.data.prioritized,p,d),"remove"==a&&z(n,O,x)),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",Y(e.t0,"togglePriority"));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}var J={grammarItems:r,proverbs:s,translateItems:p,authenticate:function(e,t){return H.apply(this,arguments)},fetchStatistics:function(){return A.a.get("/api/users/me",{headers:{"x-auth-token":localStorage.getItem("x-auth-token")}}).then((function(e){return e.data})).catch((function(e){return Y(e,"fetchStatistics")}))},grammarItemsPR:v,proverbsPR:y,translateItemsPR:O};return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,null,a.a.createElement(l.Provider,{value:{isOnline:k,setIsOnline:P,isAuthenticated:N,setIsAuthenticated:C,isAdmin:T,setIsAdmin:M,audio:q,generate:function(e,t){return $.apply(this,arguments)},togglePriority:function(e,t,r){return V.apply(this,arguments)}}},a.a.createElement(F,null),a.a.createElement(Pe,{props:J}),a.a.createElement(Ae,null))))};i.a.render(a.a.createElement(Ge,null),document.querySelector("#root"))}});