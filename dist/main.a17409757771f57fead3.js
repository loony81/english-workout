!function(e){function t(t){for(var n,a,c=t[0],s=t[1],l=t[2],u=0,f=[];u<c.length;u++)a=c[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(m&&m(t);f.length;)f.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,a=1;a<r.length;a++){var s=r[a];0!==o[s]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={0:0},o={0:0},i=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[];a[e]?t.push(a[e]):0!==a[e]&&{2:1}[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="styles."+{2:"ffb1f1f61998bb3201be",3:"b5b68a7985b2d120cb00",4:"3caf4787876a7d35f607"}[e]+".css",o=c.p+n,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var l=(m=i[s]).getAttribute("data-href")||m.getAttribute("href");if("stylesheet"===m.rel&&(l===n||l===o))return t()}var u=document.getElementsByTagName("style");for(s=0;s<u.length;s++){var m;if((l=(m=u[s]).getAttribute("data-href"))===n||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var n=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete a[e],f.parentNode.removeChild(f),r(i)},f.href=o,document.getElementsByTagName("head")[0].appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=n);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,c.nc&&s.setAttribute("nonce",c.nc),s.src=function(e){return c.p+""+({}[e]||e)+"."+{2:"ffb1f1f61998bb3201be",3:"b5b68a7985b2d120cb00",4:"3caf4787876a7d35f607"}[e]+".js"}(e);var l=new Error;i=function(t){s.onerror=s.onload=null,clearTimeout(u);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",l.name="ChunkLoadError",l.type=n,l.request=a,r[1](l)}o[e]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var m=l;i.push([62,1]),r()}({1:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(3);t.a=function(e){var t=e.children,r=e.currentPage,i=Object(n.useContext)(o.a).isOnline;return console.log("PageLayout is rendered"),a.a.createElement("div",{className:"PageLayout"},a.a.createElement("h5",null,a.a.createElement("span",{className:"offline",style:{visibility:i?"hidden":"visible"}},"You are currently offline"),"home"!=r&&a.a.createElement("span",{className:"current"},r)),t)}},3:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),a=Object(n.createContext)(null)},5:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(7);t.a=function(e){var t=e.children,r=e.to,n=e.onClickMe,i=e.disabled,c=e.title,s=e.form;return r?a.a.createElement(o.b,{title:c,to:r,className:"Button"},a.a.createElement("button",{form:s,disabled:i,onClick:n},t)):a.a.createElement("a",{title:c,className:"Button"},a.a.createElement("button",{form:s,onClick:n,disabled:i},t))}},62:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(30),i=r.n(o),c=r(7),s=r(3);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=function(){var e=Object(n.useContext)(s.a),t=e.isOnline,r=e.audio,o=e.isAuthenticated,i=e.setIsAuthenticated,u=e.isAdmin,m=e.setIsAdmin,f=l(Object(n.useState)(!1),2),p=f[0],d=f[1],h=function(e){d(!1),r.pause(),"LOGOUT"===e&&g()},g=function(){localStorage.removeItem("x-auth-token"),i(!1),u&&m(!1)},b=[{path:"/",page:"HOME"},{path:"/grammar",page:"GRAMMAR"},{path:"/proverbs",page:"PROVERBS"},{path:"/translation",page:"TRANSLATE"},{path:"/quotes",page:"QUOTES"}];return o?(b.push({path:"/signin",page:"LOGOUT"}),u||b.push({path:"/me",page:"MY PROGRESS"})):b=b.concat([{path:"/signin",page:"LOGIN"},{path:"/signup",page:"REGISTER"}]),b.push({path:"/about",page:"ABOUT"}),a.a.createElement(a.a.Fragment,null,a.a.createElement("nav",{className:"Navbar"},a.a.createElement("div",{className:"Navbar-container"},a.a.createElement(c.b,{to:"/",className:"Navbar-logo",onClick:h},a.a.createElement("img",{src:"assets/images/dumbbell.svg"})," ENGLISH WORKOUT"),a.a.createElement("img",{style:{visibility:t?"hidden":"visible"},src:"assets/images/offline.svg"}),a.a.createElement("ul",{className:p?"Navbar-menu active":"Navbar-menu"},b.map((function(e,t){return a.a.createElement("li",{key:t,className:"Navbar-item"},a.a.createElement(c.c,{to:e.path,exact:!0,className:"Navbar-link",activeClassName:"Navbar-link-active",onClick:function(){return h(e.page)}},e.page))}))),a.a.createElement("div",{className:"Navbar-hamburger",onClick:function(){return d(!p)}},a.a.createElement("i",{className:p?"fas fa-times":"fas fa-bars"})))))},f=r(2),p=r(1),d=r(5),h=function(){return a.a.createElement(p.a,{currentPage:"home"},a.a.createElement("h1",null,"Exercise your English by listening to and typing out English proverbs, sayings and quotes!"),a.a.createElement(d.a,{to:"/grammar"},"Get Started! ",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-play-circle"})))},g=function(){return a.a.createElement(p.a,{currentPage:"about"},a.a.createElement("div",{style:{fontSize:"1.1rem",background:"#fff",borderRadius:"4px",padding:"5px",boxShadow:"0 0 10px rgba(0,0,0,0.5)"}},a.a.createElement("p",null,"   How not to forget English? If you've been learning English for quite some time and have gained some significant knowledge (at least by your own reckoning), you understand that if you are not a native speaker, you'll start to 'lose' your English very quickly without practice. It is a natural phenomenon. Apparently remembering a language, even your mother tongue, isn't quite like riding a bicycle. Without practice, your English will start to 'fade away'. So, how to maintain your English level?"),a.a.createElement("p",null,"I have found a solution. I have built a web app that will help you keep your English at a high level all the time! The app consists of three sections: 'Grammar', 'Proverbs' and 'Translation'. The 'Grammar' section allows you to practice English grammar. This is a collection of completely arbitrary sentences and phrases recorded in English which explain English grammar rules. The app randomly generates a phrase when you press the button. Your job is to listen to the recording carefully, understand it, and type it exactly like it sounds. The 'Proverbs' section contains a huge collection of recorded English proverbs, idioms, quotes, movie quotes, popular sayings, etc. It works exactly the same way: you generate recordings and type them precisely. You can recite them out loud if you want, to better memorize them. For most proverbs there is also an interpretation in parentheses that you also need to type. And with 'Translation' you can practice translating common English phrases and idioms for everyday use from Russian into English. This app will not only improve your pronunciation and listening skills, but also touch typing skills. Being able to quickly type in English is a must have skill nowadays. You can also use the application in offline mode by fetching items in advance (they will be stored in your browser during the session) and practicing when there's no Internet access."),a.a.createElement("p",null,"I chose proverbs for a reason. It is very efficient to learn English by memorizing proverbs and common phrases because they have a tendency to get imprinted into your brain much better than memorizing separate words. You can practice throughout the day whenever you have free time and access to the Internet. Just make a habit of it! And I guarantee you that you'll never forget English! This app contains over 4000 recordings made in American English (mostly). And I keep adding new ones all the time."),a.a.createElement("p",null,"Don't let your English rust, keep it shiny!")))},b=Object(n.forwardRef)((function(e,t){console.log("Textarea is rendered");var r={};return"proverbs"===e.topic?r.visibility="visible":r.visibility=e.description?"hidden":"visible",a.a.createElement("textarea",{disabled:-1===e.currentItem,onChange:e.compareText,onBlur:function(t){"proverbs"===e.topic&&t.target.focus()},ref:t,style:r,placeholder:"Type it here",maxLength:"500"})})),v=Object(n.forwardRef)((function(e,t){var r={};e.description?(r.visibility="visible",r.display="block"):(r.visibility="hidden",r.display="none");var n=e.currentItem;return a.a.createElement(a.a.Fragment,null,"proverbs"!==e.topic&&a.a.createElement("p",{key:n,ref:t,style:r},-1==n?"":e.items[n].description))}));function y(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=function(e){var t=e.topic,r=e.item,o=e.pr,i=void 0!==o&&o,c=E(Object(n.useState)(!1),2),l=c[0],u=c[1],m=Object(f.g)(),p=Object(n.useContext)(s.a),d=p.isOnline,h=p.togglePriority,g=r.itemStatistics,b=g._id,v=g.timesEncountered,w=g.lastEncounteredOn,O=g.prioritized;console.log("Statistics is rendered");var x=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,h(t,b,O?"remove":"add");case 3:r=e.sent,u(!1),r&&r.error&&"Invalid token"===r.error&&m.push({pathname:"/signin",state:{from:location.pathname}});case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){y(o,n,a,i,c,"next",e)}function c(e){y(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return a.a.createElement("div",{className:"statistics"},a.a.createElement("p",null,0==v?"Previously encountered: 0 times":1==v?"Previously encountered: 1 time on ".concat(w):"Previously encountered: ".concat(v," times, last on ").concat(w)),a.a.createElement("div",null,a.a.createElement("p",null,i?"Remove from PR list":O?"This item is on your PR list. Do you want to remove it?":"Add to PR list"),a.a.createElement("button",{disabled:!(!l&&d),onClick:function(){return x()}},O?"-":"+")))},x=function(e){var t=e.topic,r=e.currentItem,o=(e.loading,e.description),i=e.sentenceVisibility,c=e.getNext,l=e.playSound,u=e.toggleVisibility,m=e.getPrevious,f=e.showHint,p=e.toggleTextarea,h=e.pr,g=Object(n.useContext)(s.a),b=g.isOnline,v=g.isAuthenticated,y=g.audio,E=h?"/api/prlist/":"/api/items/",w=h?"Download from Priority List":"Download a new item",O="translation"===t||"quotes"===t?"Russian":"Info",x=o?"Switch to textarea":"translation"===t||"quotes"===t?"View Russian version":"Show description for this item",k=i?"Hide this item completely":"Completely reveal this item",S=h?"Return to main "+t+" page":"Go to my priority list for "+t;return console.log("Bottom Navigation is rendered"),a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{title:w,onClickMe:function(){return c(E,t)},disabled:!b},"Next ",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-cloud-download-alt"})),"translation"!==t&&"quotes"!==t&&a.a.createElement(d.a,{onClickMe:function(){return l()},disabled:r<0},"Play ",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-volume-up"})),"grammar"==t&&a.a.createElement(d.a,{title:x,onClickMe:function(){return p()},disabled:r<0},o?"Type":O," ",a.a.createElement("br",null),o?a.a.createElement("i",{className:"fas fa-keyboard"}):a.a.createElement("i",{className:"fas fa-info-circle"})),("translation"===t||"quotes"===t)&&a.a.createElement(d.a,{title:x,onClickMe:function(){return p()},disabled:r<0},o?"Type":O," ",a.a.createElement("br",null),o?a.a.createElement("i",{className:"fas fa-keyboard"}):a.a.createElement("i",{className:"fas fa-language"})),a.a.createElement(d.a,{title:k,onClickMe:function(){return u()},disabled:r<0},i?"Hide":"Show"," ",a.a.createElement("br",null),i?a.a.createElement("i",{className:"fas fa-eye-slash"}):a.a.createElement("i",{className:"fas fa-eye"})),a.a.createElement(d.a,{title:"Go back to previously downloaded item",onClickMe:function(){return m()},disabled:r<=0},"Previous ",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-chevron-circle-right"})),("translation"===t||"quotes"===t)&&a.a.createElement(d.a,{title:"Reveal one character",onClickMe:function(){return f()},disabled:r<0},"Hint ",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-user-secret"})),v&&a.a.createElement(d.a,{title:S,to:h?"/"+t:"/"+t+"pr",onClickMe:function(){return y.pause()}},h?"Go Back":"Priority List"," ",a.a.createElement("br",null),h?a.a.createElement("i",{className:"fas fa-sign-out-alt"}):a.a.createElement("i",{className:"fas fa-light fa-list-ul"})))},k=Object(n.memo)(x,(function(e,t){return t.topic===e.topic&&t.currentItem===e.currentItem&&t.sentenceVisibility===e.sentenceVisibility&&t.loading===e.loading&&t.description===e.description&&t.pr===e.pr})),S=r(15),j=r.n(S),P=r(12),A=r.n(P);function I(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function T(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){C(o,n,a,i,c,"next",e)}function c(e){C(o,n,a,i,c,"throw",e)}i(void 0)}))}}var R=new URL(window.location.origin);function q(){return L.apply(this,arguments)}function L(){return(L=T(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.searchParams.set("rand",Date.now()),e.prev=1,e.next=4,A.a.head(R.toString());case 4:return console.log("Connection to the Internet restored."),e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(1),console.log("Trying to reconnect..."),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function M(e){var t,r="",n=I(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.match(/[0-9.,':;()!?\s-\/]/)?r+=a:a.match(/[A-Z]/)?r+="X":r+="x"}}catch(e){n.e(e)}finally{n.f()}return r}function D(e,t){e.textContent="",t(setInterval((function(){e&&(e.textContent.length>=3?e.textContent=".":e.textContent+=".")}),500))}function G(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function z(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){G(o,n,a,i,c,"next",e)}function c(e){G(o,n,a,i,c,"throw",e)}i(void 0)}))}}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var W=function(e){var t=e.items,r=e.topic,o=e.pr,i=void 0!==o&&o,c=U(Object(n.useState)(t.length-1),2),l=c[0],u=c[1],m=U(Object(n.useState)(!1),2),p=m[0],d=m[1],h=U(Object(n.useState)(!0),2),g=h[0],y=h[1],E=U(Object(n.useState)(0),2),w=E[0],x=E[1],S=U(Object(n.useState)(!1),2),P=S[0],A=S[1],I=Object(n.useRef)(),N=Object(n.useRef)(),C=Object(n.useRef)(),T=Object(n.useContext)(s.a),R=T.isOnline,q=T.isAuthenticated,L=T.audio,M=T.generate,G=Object(f.g)();console.log("WorkingArea is rendered"),Object(n.useEffect)((function(){u(t.length-1),p&&d(!1)}),[t]),Object(n.useEffect)((function(){P?D(N.current,x):clearInterval(w)}),[P]),Object(n.useEffect)((function(){I.current.value="",g||y(!0)}),[l]),Object(n.useEffect)((function(){R&&P&&(A(!1),t.length>0?N.current.textContent=t[l].mask:N.current.textContent="")}),[R]);var B=function(){var e=z(regeneratorRuntime.mark((function e(r,n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=15;break}return L.pause(),A(!0),I.current.value="","proverbs"!==n&&(C.current.textContent=""),e.next=7,M(r,n);case 7:if(a=e.sent,A(!1),!a||!a.error){e.next=15;break}if("Invalid token"!==a.error){e.next=14;break}return e.abrupt("return",G.push({pathname:"/signin",state:{from:location.pathname}}));case 14:a.error.startsWith("There are no items on")?N.current.textContent=a.error:l>-1&&(N.current.textContent=t[l].mask,"proverbs"!==n&&(C.current.textContent=t[l].description));case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();function W(){return(W=z(regeneratorRuntime.mark((function e(){var n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=17;break}if("proverbs"!==r&&I.current.focus(),n=t[l].audio.name,!(a=t[l].audio.link)){e.next=17;break}return e.prev=5,e.next=8,j.a.getItem(n);case 8:return(o=e.sent)?L.src=URL.createObjectURL(o):(L.src=a,console.log("playing from Google Drive")),e.next=12,L.play();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),console.log(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}return l=t[l]?l:t.length-1,a.a.createElement("div",{className:"WorkingArea"},a.a.createElement("div",{className:"WorkingArea-show"},a.a.createElement("p",{ref:N,key:l,style:{borderBottom:"proverbs"!==r&&g&&"1px solid #d3d3d3"}},l>-1&&(p?t[l].sentence:t[l].mask)),a.a.createElement("div",null,a.a.createElement(b,{topic:r,currentItem:l,description:g,compareText:function(e){if(!P){var r=e.target.style.color,n=e.target.value,a=e.target.value.length,o=t[l];o.sentence.startsWith(n)?(p||(N.current.innerText=n+o.mask.slice(a)),"red"!==r&&"green"!==r||(e.target.style.color="black"),o.sentence.length===a&&(e.target.style.color="green",!p&&d(!0))):e.target.style.color="red"}},ref:I}),a.a.createElement(v,{topic:r,description:g,ref:C,currentItem:l,items:t})),q&&l>-1&&t[l].itemStatistics&&a.a.createElement(O,{topic:r,item:t[l],pr:i})),a.a.createElement("div",{className:"WorkingArea-navigation"},a.a.createElement(k,{topic:r,currentItem:l,description:g,loading:P,sentenceVisibility:p,getNext:B,playSound:function(){return W.apply(this,arguments)},toggleVisibility:function(){P||("proverbs"!==r&&I.current.focus(),d(!p))},getPrevious:function(){L.pause(),w&&clearInterval(w),P&&A(!1),u(l-1),p&&d(!1)},showHint:function(){if(!P){var e=t[l],r=I.current.value.length;r!==e.sentence.length&&(I.current.style.color="black",I.current.focus(),I.current.value=e.sentence.slice(0,r+1),p||(N.current.innerText=I.current.value+e.mask.slice(r+1)),I.current.value.length===e.sentence.length&&(!p&&d(!0),I.current.style.color="green"))}},toggleTextarea:function(){y(!g),setTimeout((function(){return I.current.focus()}),100)},pr:i})))},_=function(e){var t=e.items;return console.log("Grammar is rendered"),a.a.createElement(p.a,{currentPage:"grammar"},a.a.createElement(W,{items:t,topic:"grammar"}))},H=function(e){var t=e.items;return console.log("Proverbs is rendered"),a.a.createElement(p.a,{currentPage:"proverbs"},a.a.createElement(W,{items:t,topic:"proverbs"}))},F=function(e){var t=e.items;return console.log("Translate is rendered"),a.a.createElement(p.a,{currentPage:"translation"},a.a.createElement(W,{items:t,topic:"translation"}))},Y=function(e){var t=e.items;return console.log("Quotes is rendered"),a.a.createElement(p.a,{currentPage:"movie quotes"},a.a.createElement(W,{items:t,topic:"quotes"}))};function V(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Z=function(e){var t=e.page,r=e.authenticate,o=K(Object(n.useState)(""),2),i=o[0],c=o[1],l=K(Object(n.useState)({}),2),u=l[0],m=l[1],h=K(Object(n.useState)(!1),2),g=h[0],b=h[1],v=Object(n.useContext)(s.a).isOnline,y=Object(f.g)(),E="signup"===t;Object(n.useEffect)((function(){y.location.state&&c("Sorry to interrupt, but your session has expired. Please sign back in if you care about tracking your progress")}),[]),Object(n.useEffect)((function(){i&&c(""),(u.email||u.password)&&w()}),[t]);var w=function(){m({email:"",password:""})},O=function(e){m($($({},u),{},Q({},e.target.name,e.target.value)))},x=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i&&c(""),b(!0),e.next=5,r(E?"/api/users":"api/auth",u);case 5:if(n=e.sent,b(!1),!n||!n.error){e.next=10;break}return"Network Error"!==n.error&&c(n.error),e.abrupt("return");case 10:y.location.state&&y.goBack(),y.push("/");case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){V(o,n,a,i,c,"next",e)}function c(e){V(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return console.log("Auth is rendered"),a.a.createElement(p.a,{currentPage:t},a.a.createElement("div",{className:"WorkingArea"},a.a.createElement("div",{className:"WorkingArea-show"},a.a.createElement("form",{id:"authForm",onSubmit:x},"signup"===t&&a.a.createElement("input",{type:"text",name:"name",value:u.name,onChange:O,placeholder:"Your name",required:!0}),a.a.createElement("input",{type:"email",name:"email",value:u.email,onChange:O,placeholder:"Your email",required:!0}),a.a.createElement("input",{type:"password",name:"password",value:u.password,onChange:O,placeholder:"Your password",required:!0})),a.a.createElement("p",{style:{color:"red"}},i)),a.a.createElement("div",{className:"WorkingArea-navigation"},a.a.createElement(d.a,{form:"authForm",disabled:!(!g&&v)},E?"Register":"Login",a.a.createElement("br",null),E?a.a.createElement("i",{className:"fas fa-user-plus"}):a.a.createElement("i",{className:"fas fa-sign-in-alt"})))))};function ee(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ne=function(e){var t,r=e.fetchStatistics,o=te(Object(n.useState)(""),2),i=o[0],c=o[1],l=te(Object(n.useState)(""),2),u=l[0],m=l[1],h=te(Object(n.useState)(!1),2),g=h[0],b=h[1],v=te(Object(n.useState)(0),2),y=v[0],E=v[1],w=Object(n.useContext)(s.a).isOnline,O=Object(f.g)(),x=Object(n.useRef)();w?u?t=u:i&&(t=i):t="Sorry, you can't view your statistics while being offline. Please, get back online",Object(n.useEffect)((function(){var e;w&&(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,r();case 3:if(t=e.sent,b(!1),!t||!t.error){e.next=11;break}return"Invalid token"===t.error&&O.push({pathname:"/signin",state:{from:location.pathname}}),m(t.error),e.abrupt("return");case 11:c(k(t));case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){ee(o,n,a,i,c,"next",e)}function c(e){ee(o,n,a,i,c,"throw",e)}i(void 0)}))})()}),[w]),Object(n.useEffect)((function(){g?D(x.current,E):clearInterval(y)}),[g]);var k=function(e){var t=e.name,r=e.dateJoined,n=e.grammar,a=e.proverbs,o=e.translations,i=e.quotes;return'<strong style="font-size: 1.4rem;">'.concat(t,"</strong>\nJoined on: ").concat(new Date(r).toDateString(),'\n\t<span style="text-decoration: underline;">Grammar</span>: \n\t\tTotal items: <strong>').concat(n.total,"</strong>\n\t\tProcessed: <strong>").concat(n.processed,"</strong>\n\t\tOn Priority List: <strong>").concat(n.onPriorityList,'</strong>\n\t<span style="text-decoration: underline;">Proverbs</span>: \n\t\tTotal items: <strong>').concat(a.total,"</strong>\n\t\tProcessed: <strong>").concat(a.processed,"</strong>\n\t\tOn Priority List: <strong>").concat(a.onPriorityList,'</strong>\n\t<span style="text-decoration: underline;">Translations</span>: \n\t\tTotal items: <strong>').concat(o.total,"</strong>\n\t\tProcessed: <strong>").concat(o.processed,"</strong>\n\t\tOn Priority List: <strong>").concat(o.onPriorityList,'</strong>\n\t<span style="text-decoration: underline;">Movie Quotes</span>: \n\t\tTotal items: <strong>').concat(i.total,"</strong>\n\t\tProcessed: <strong>").concat(i.processed,"</strong>\n\t\tOn Priority List: <strong>").concat(i.onPriorityList,"</strong>\n")};return console.log("Me is rendered"),a.a.createElement(p.a,{currentPage:"My Progress"},a.a.createElement("div",{className:"WorkingArea"},a.a.createElement("div",{className:"WorkingArea-show"},a.a.createElement("p",{ref:x,style:{fontSize:"1rem",borderRadius:"0.25rem"},dangerouslySetInnerHTML:{__html:t}})),a.a.createElement("div",{className:"WorkingArea-navigation"},a.a.createElement(d.a,{onClickMe:function(){return O.goBack()}},"Back",a.a.createElement("br",null),a.a.createElement("i",{className:"fas fa-chevron-circle-left"})))))},ae=function(e){var t=e.items;return console.log("GrammarPriority is rendered"),a.a.createElement(p.a,{currentPage:"grammar priority"},a.a.createElement(W,{items:t,topic:"grammar",pr:!0}))},oe=function(e){var t=e.items;return console.log("ProverbsPriority is rendered"),a.a.createElement(p.a,{currentPage:"proverbs priority"},a.a.createElement(W,{items:t,topic:"proverbs",pr:!0}))},ie=function(e){var t=e.items;return console.log("TranslatePriority is rendered"),a.a.createElement(p.a,{currentPage:"translation priority"},a.a.createElement(W,{items:t,topic:"translation",pr:!0}))},ce=function(e){var t=e.items;return console.log("QuotesPriority is rendered"),a.a.createElement(p.a,{currentPage:"movie quotes priority"},a.a.createElement(W,{items:t,topic:"quotes",pr:!0}))},se=a.a.lazy((function(){return r.e(4).then(r.bind(null,63))})),le=a.a.lazy((function(){return r.e(2).then(r.bind(null,65))})),ue=a.a.lazy((function(){return r.e(3).then(r.bind(null,64))})),me=function(e){var t=e.props,r=Object(n.useContext)(s.a),o=r.isAuthenticated,i=r.isAdmin,c=t.grammarItems,l=t.proverbs,u=t.translateItems,m=t.quotes,p=t.authenticate,d=t.fetchStatistics,b=t.grammarItemsPR,v=t.proverbsPR,y=t.translateItemsPR,E=t.quotesPR;return i?a.a.createElement(f.d,null,a.a.createElement(a.a.Suspense,{fallback:a.a.createElement("p",{style:{textAlign:"center"}},"Loading ...")},a.a.createElement(f.b,{path:"/",exact:!0},a.a.createElement(h,null)),a.a.createElement(f.b,{path:"/grammar"},a.a.createElement(se,{topic:"grammar"})),a.a.createElement(f.b,{path:"/proverbs"},a.a.createElement(se,{topic:"proverbs"})),a.a.createElement(f.b,{path:"/translation"},a.a.createElement(se,{topic:"translation"})),a.a.createElement(f.b,{path:"/quotes"},a.a.createElement(se,{topic:"quotes"})),a.a.createElement(f.b,{path:"/editgrammar"},a.a.createElement(le,{topic:"grammar"})),a.a.createElement(f.b,{path:"/editproverbs"},a.a.createElement(le,{topic:"proverbs"})),a.a.createElement(f.b,{path:"/edittranslation"},a.a.createElement(le,{topic:"translation"})),a.a.createElement(f.b,{path:"/editquotes"},a.a.createElement(le,{topic:"quotes"})),a.a.createElement(f.b,{path:"/addgrammar"},a.a.createElement(ue,{topic:"grammar"})),a.a.createElement(f.b,{path:"/addproverbs"},a.a.createElement(ue,{topic:"proverbs"})),a.a.createElement(f.b,{path:"/addtranslation"},a.a.createElement(ue,{topic:"translation"})),a.a.createElement(f.b,{path:"/addquotes"},a.a.createElement(ue,{topic:"quotes"})),a.a.createElement(f.b,{path:"/about"},a.a.createElement(g,null)),a.a.createElement(f.b,{path:"/signin"},a.a.createElement(Z,{page:"signin",authenticate:p})),a.a.createElement(f.a,{to:"/"}))):a.a.createElement(f.d,null,a.a.createElement(f.b,{path:"/",exact:!0},a.a.createElement(h,null)),a.a.createElement(f.b,{path:"/grammar"},a.a.createElement(_,{items:c})),a.a.createElement(f.b,{path:"/proverbs"},a.a.createElement(H,{items:l})),a.a.createElement(f.b,{path:"/translation"},a.a.createElement(F,{items:u})),a.a.createElement(f.b,{path:"/quotes"},a.a.createElement(Y,{items:m})),a.a.createElement(f.b,{path:"/about"},a.a.createElement(g,null)),!o&&a.a.createElement(f.b,{path:"/signup",exact:!0},a.a.createElement(Z,{page:"signup",authenticate:p})),!o&&a.a.createElement(f.b,{path:"/signin",exact:!0},a.a.createElement(Z,{page:"signin",authenticate:p})),o&&a.a.createElement(f.b,{path:"/me",exact:!0},a.a.createElement(ne,{fetchStatistics:d})),o&&a.a.createElement(f.b,{path:"/grammarpr",exact:!0},a.a.createElement(ae,{items:b})),o&&a.a.createElement(f.b,{path:"/proverbspr",exact:!0},a.a.createElement(oe,{items:v})),o&&a.a.createElement(f.b,{path:"/translationpr",exact:!0},a.a.createElement(ie,{items:y})),o&&a.a.createElement(f.b,{path:"/quotespr",exact:!0},a.a.createElement(ce,{items:E})),a.a.createElement(f.a,{to:"/"}))},fe=function(){var e=Object(n.useContext)(s.a).isOnline;return a.a.createElement("footer",{className:"Footer"},a.a.createElement("p",null,"Created with ♥ by Roman Nazarenko ",a.a.createElement("a",{href:"https://github.com/loony81",onClick:function(t){return!e&&t.preventDefault()}},a.a.createElement("i",{className:"fab fa-github-alt"}))))},pe=r(10),de=r.n(pe),he=r(32);function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function we(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Ee(o,n,a,i,c,"next",e)}function c(e){Ee(o,n,a,i,c,"throw",e)}i(void 0)}))}}function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||xe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){if(e){if("string"==typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ke(e,t):void 0}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Se=function(){var e,t=Oe(Object(n.useState)([]),2),r=t[0],o=t[1],i=Oe(Object(n.useState)([]),2),l=i[0],u=i[1],f=Oe(Object(n.useState)([]),2),p=f[0],d=f[1],h=Oe(Object(n.useState)([]),2),g=h[0],b=h[1],v=Oe(Object(n.useState)([]),2),y=v[0],E=v[1],w=Oe(Object(n.useState)([]),2),O=w[0],x=w[1],k=Oe(Object(n.useState)([]),2),S=k[0],P=k[1],I=Oe(Object(n.useState)([]),2),N=I[0],C=I[1],T=Oe(Object(n.useState)(!0),2),R=T[0],L=T[1],D=Oe(Object(n.useState)(!1),2),G=D[0],z=D[1],U=Oe(Object(n.useState)(!1),2),B=U[0],W=U[1],_=Oe(Object(n.useState)(new Audio),2),H=_[0];_[1];H.volume=1;var F=Object(n.memo)(m);console.log("App is rendered"),Object(n.useEffect)((function(){window.addEventListener("offline",function(){var e=we(de.a.mark((function e(t){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:!e.sent&&R&&L(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1),window.addEventListener("online",function(){var e=we(de.a.mark((function e(t){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:e.sent&&L(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1);var e=localStorage.getItem("x-auth-token");e&&(Object(he.isJwtExpired)(e)||(z(!0),Q(e)&&W(!0))),console.log("App is mounted")}),[]),Object(n.useEffect)((function(){R||(e=setInterval(we(de.a.mark((function t(){var r;return de.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q();case 2:r=t.sent,console.log(r),r&&(L(!0),clearInterval(e));case 5:case"end":return t.stop()}}),t)}))),5e3))}),[R]);var Y=function(e){return A.a.post("/api/items/audio",{url:e},{responseType:"blob"}).then((function(e){return e.data})).catch((function(e){throw new Error("Can't download audio file")}))},V=function(e,t,n){if("grammar"==e){var a=[].concat(ye(n?y:r),[t]);n?E(a):o(a)}if("proverbs"==e){var i=[].concat(ye(n?O:l),[t]);n?x(i):u(i)}if("translation"==e){var c=[].concat(ye(n?S:p),[t]);n?P(c):d(c)}if("quotes"==e){var s=[].concat(ye(n?N:g),[t]);n?C(s):b(s)}},J=function(e,t,r,n){n(r.map((function(r){if(r.id===e){var n=be({},r);return n.itemStatistics.prioritized=t,n}return r})))},$=function(e,t,r){var n=t.filter((function(t){return t.id!==e}));n.length<t.length&&r(n)},Q=function(e){var t=e.indexOf(".")+1,r=e.lastIndexOf(".");return JSON.parse(atob(e.slice(t,r))).isAdmin},K=function(e,t){var r="";return e.response?"Invalid token"===(r=e.response.data.message)&&(localStorage.removeItem("x-auth-token"),z(!1)):"Network Error"===(r=e.message)&&L(!1),console.log("Something wrong inside ".concat(t,"(): ").concat(r)),{error:r}};function X(){return(X=we(de.a.mark((function e(t,r){var n,a,o,i,c,s,l,u,m,f,p;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/prlist/"===t,a=G?{"x-auth-token":localStorage.getItem("x-auth-token")}:null,e.prev=2,e.next=5,A.a.get(t+r,{headers:a});case 5:if(!(c=e.sent).data.audio){e.next=20;break}if(s=c.data.audio,l=s.name,u=s.link,!l||!u){e.next=20;break}return l=r+"/"+l,c.data.audio.name=l,e.next=13,j.a.getItem(l);case 13:if(m=e.sent,!u||m){e.next=20;break}return e.next=17,Y(u);case 17:return f=e.sent,e.next=20,j.a.setItem(l,f);case 20:c.data.mask=M(c.data.sentence),(p=null===(o=c.data)||void 0===o||null===(i=o.itemStatistics)||void 0===i?void 0:i.lastEncounteredOn)&&(c.data.itemStatistics.lastEncounteredOn=new Date(p).toDateString().split(" ").slice(1).join(" ")),V(r,c.data,n),e.next=29;break;case 26:return e.prev=26,e.t0=e.catch(2),e.abrupt("return",K(e.t0,"generate"));case 29:case"end":return e.stop()}}),e,null,[[2,26]])})))).apply(this,arguments)}function Z(){return(Z=we(de.a.mark((function e(t,r){var n,a;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.post(t,be({},r),{"Content-Type":"application/json"});case 3:if(n=e.sent,a=n.headers["x-auth-token"]){e.next=7;break}throw new Error("Something went wrong, try again later");case 7:localStorage.setItem("x-auth-token",a),z(!0),Q(a)&&W(!0),e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",K(e.t0,"authenticate"));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function ee(){return(ee=we(de.a.mark((function e(t,n,a){var i,c,s;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="/api/prlist/".concat(t,"/").concat(n,"/").concat(a),c=G?{"x-auth-token":localStorage.getItem("x-auth-token")}:null,e.prev=2,e.next=5,A.a.put(i,null,{headers:c});case 5:s=e.sent,"grammar"===t&&(J(n,s.data.prioritized,r,o),"remove"==a&&$(n,y,E)),"proverbs"==t&&(J(n,s.data.prioritized,l,u),"remove"==a&&$(n,O,x)),"translation"==t&&(J(n,s.data.prioritized,p,d),"remove"==a&&$(n,S,P)),"quotes"==t&&(J(n,s.data.prioritized,g,b),"remove"==a&&$(n,N,C)),e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",K(e.t0,"togglePriority"));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}var te={grammarItems:r,proverbs:l,translateItems:p,quotes:g,authenticate:function(e,t){return Z.apply(this,arguments)},fetchStatistics:function(){return A.a.get("/api/users/me",{headers:{"x-auth-token":localStorage.getItem("x-auth-token")}}).then((function(e){return e.data})).catch((function(e){return K(e,"fetchStatistics")}))},grammarItemsPR:y,proverbsPR:O,translateItemsPR:S,quotesPR:N};return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,null,a.a.createElement(s.a.Provider,{value:{isOnline:R,setIsOnline:L,isAuthenticated:G,setIsAuthenticated:z,isAdmin:B,setIsAdmin:W,audio:H,generate:function(e,t){return X.apply(this,arguments)},togglePriority:function(e,t,r){return ee.apply(this,arguments)}}},a.a.createElement(F,null),a.a.createElement(me,{props:te}),a.a.createElement(fe,null))))};i.a.render(a.a.createElement(Se,null),document.querySelector("#root"))}});